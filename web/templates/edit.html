{% extends "base.html" %}

{% block content %}
<h2 class="mb-4">编辑题目</h2>
<form method="POST" action="{{ url_for('edit_question', index=index) }}" enctype="multipart/form-data">
    <div class="mb-3">
        <label for="content" class="form-label">题目描述</label>
        <textarea class="form-control" id="content" name="content" rows="5" required>{{ question.content }}</textarea>
        <div class="form-text">请不要包含 '|' 符号。支持多行输入。</div>
    </div>
    <div class="mb-3">
        <label for="image" class="form-label">题目图片 (可选)</label>
        {% if question.image %}
        <div class="mb-2">
            <img src="{{ url_for('static', filename='uploads/' + question.image) }}" alt="Current Image" style="max-height: 200px; max-width: 100%;">
            <div class="form-text">当前图片</div>
        </div>
        {% endif %}
        <input type="file" class="form-control" id="image" name="image" accept="image/*">
        <div class="form-text">上传新图片将替换旧图片。</div>
    </div>
    <div class="mb-3">
        <label for="answer" class="form-label">标准答案</label>
        <input type="text" class="form-control" id="answer" name="answer" value="{{ question.answer }}" required>
        <div class="form-text">支持多个正确答案，请用分号 (;) 或中文分号 (；) 分隔。</div>
    </div>
    <div class="mb-3">
        <label for="score" class="form-label">分值</label>
        <input type="number" class="form-control" id="score" name="score" value="{{ question.score }}" required>
    </div>
    <div class="mb-3">
        <label for="category" class="form-label">题目集/分类</label>
        <input type="text" class="form-control" id="category" name="category" list="categoryList" value="{{ question.category }}" placeholder="例如：C语言基础">
        <datalist id="categoryList">
            {% for cat in categories %}
            <option value="{{ cat }}">
            {% endfor %}
        </datalist>
    </div>
    <button type="submit" class="btn btn-primary">保存修改</button>
    <a href="/manage" class="btn btn-secondary">取消</a>
</form>
{% endblock %}
